{"version":3,"sources":["game.js"],"names":["NUMBERS","cc","Class","extends","Component","properties","scoreTitle","Label","score","blockPrefab","Prefab","gap","background","Node","getblocks","positions","blockSize","winSize","width","x","y","i","push","j","block","instantiate","height","setPosition","v2","getComponent","setNumber","addChild","getEmptyBlocks","localtion","blocks","length","addBlock","index","Math","floor","random","log","position","blockNum","data","console","init","updateScore","destroy","number","string","gameover","director","loadScene","checkBlock","n","afterMove","isTrue","doMove","callback","action","moveTo","finish","callFunc","runAction","sequence","moveMag","dire","tomove","move","counter","addEventHandler","on","event","startPoint","getLocation","endPoint","vec","sub","mag","abs","start"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["const NUMBERS=[2,4];\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties:{\r\n        scoreTitle:cc.Label,\r\n        score:0,\r\n        blockPrefab:cc.Prefab,\r\n        gap:20,\r\n        background:cc.Node\r\n    },\r\n\r\n/**\r\n*生成4x4的板块\r\n*/\r\ngetblocks(){\r\n    this.positions = [];\r\n    this.blockSize = ( cc.winSize.width - this.gap * 5 ) / 4;\r\n    let x = this.blockSize / 2 + this.gap;\r\n    let y = this.blockSize;\r\n        for (var i = 0; i < 4; i++) {\r\n            this.positions.push([0,0,0,0]);\r\n\r\n             for (var j = 0; j < 4; j++){\r\n                //cc.instantiate 初始化\r\n                let block = cc.instantiate(this.blockPrefab);\r\n                block.width=this.blockSize;\r\n                block.height = this.blockSize;\r\n                //setPosition 定位\r\n                block.setPosition(cc.v2(x,y));\r\n                this.positions[i][j] = cc.v2(x,y);\r\n                block.getComponent('block').setNumber(0);\r\n                this.background.addChild(block);\r\n\r\n                x += this.blockSize + this.gap;\r\n             }\r\n            y+=this.blockSize + this.gap;\r\n            x = this.blockSize / 2 + this.gap;\r\n        }\r\n\r\n\r\n},\r\n\r\n//得到空的板块\r\ngetEmptyBlocks(){\r\n    let localtion=[];\r\n        for(let i = 0; i < this.blocks.length; i++ ){\r\n            for(let j = 0; j < this.blocks[i].length; j++){\r\n                if(this.blocks[i][j]==null){\r\n                   localtion.push([i,j]);\r\n                }\r\n            }\r\n        }\r\n    return localtion;\r\n},\r\naddBlock(){\r\n    let localtion = this.getEmptyBlocks();\r\n    if(localtion.length == 0){\r\n        return false;\r\n    }\r\n    let index = Math.floor(Math.random() * localtion.length);\r\n    cc.log(index);\r\n    let x=localtion[index][0];\r\n    let y = localtion[index][1];\r\n    this.position = this.positions[x][y];\r\n\r\n    let block = cc.instantiate(this.blockPrefab);\r\n    block.width=this.blockSize;\r\n    block.height = this.blockSize;\r\n\r\n    block.setPosition(this.position);\r\n\r\n    let blockNum=NUMBERS[Math.floor(Math.random()*NUMBERS.length)];\r\n    block.getComponent('block').setNumber(blockNum);\r\n    this.background.addChild(block);\r\n    this.blocks[x][y] = block;\r\n    this.data[x][y] = blockNum;\r\n    console.log('test'+blockNum);\r\n\r\n    return true;\r\n},\r\ninit(){\r\n    this.updateScore(0);\r\n\r\n    if(this.blocks){\r\n        for(let i = 0; i < this.blocks.length; i++ ){\r\n            for(let j = 0; j < this.blocks[i].length; j++){\r\n                if(this.blocks[i][j]!=null){\r\n                    this.blocks[i][j].destroy();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    this.blocks=[];\r\n    this.data=[];\r\n\r\n    for (let i = 0;i < 4; i++) {\r\n        this.blocks.push([null,null,null,null]);\r\n        this.data.push([0,0,0,0]);\r\n    }\r\n    this.addBlock();\r\n    this.addBlock();\r\n    this.addBlock();\r\n\r\n},\r\nupdateScore(number){\r\n    this.score = number;\r\n    this.scoreTitle.string = '分数 : '+ number;\r\n\r\n},\r\ngameover(){\r\ncc.log(\"gameover\");\r\n cc.director.loadScene('gameOver');\r\n},\r\ncheckBlock(){\r\n    for(let i=0;i<4;i++){\r\n        for(let j=0;j<4;j++){\r\n            let n=this.data[i][j];\r\n            if(n==0) return false;\r\n            if(j>0 && j<4 && this.data[i][j-1]==n) return false;  //判断相邻的是否相同\r\n            if(j>0 && j<3 && this.data[i][j+1]==n) return false;\r\n            if(i>0 && j<4 && this.data[i-1][j]==n) return false;\r\n            if(i>0 && i<3 && this.data[i+1][j]==n) return false;\r\n        }\r\n    }\r\n    return true\r\n},\r\nafterMove(isTrue){\r\n    //只有滑动了才能创建格子\r\n    if(isTrue){\r\n        this.updateScore(this.score+1);\r\n         this.addBlock();\r\n    }\r\n    if(this.checkBlock()){\r\n       this.gameover();\r\n    }\r\n},\r\n/**\r\n * 移动 block\r\n * @param  {[type]}   block    [description]\r\n * @param  {[type]}   position [description]\r\n * @param  {Function} callback [description]\r\n * @return {[type]}            [description]\r\n */\r\ndoMove(block,position,callback){\r\n    let action = cc.moveTo(0.1,position);\r\n    let finish = cc.callFunc(()=>{\r\n        callback && callback();\r\n         return;\r\n    })\r\n    block.runAction(cc.sequence(action,finish))\r\n},\r\nmoveMag(dire){\r\n    console.log(dire);\r\n    if(dire == 'left'){\r\n        let tomove=[];\r\n        let isTrue=false;\r\n        let move = (x,y,callback)=>{\r\n            if(y==0 || this.data[x][y]==0){  //最左边|| 当前为0/null 不动\r\n                callback && callback();\r\n                return;\r\n            }else if(this.data[x][y-1]==0){  //左前一个为0 就移动\r\n                let block = this.blocks[x][y];\r\n                let position = this.positions[x][y-1];\r\n                this.blocks[x][y-1]=block;\r\n                this.data[x][y-1] = this.data[x][y];\r\n                this.data[x][y] = 0;\r\n                this.blocks[x][y]=null;\r\n                this.doMove(block,position,()=>{\r\n                     move(x,y-1,callback);\r\n                });\r\n                isTrue=true;\r\n            }else if(this.data[x][y] == this.data[x][y-1]){ //相邻数字相同 合并\r\n                let block = this.blocks[x][y];\r\n                let position = this.positions[x][y-1];\r\n\r\n                this.data[x][y-1] =this.data[x][y]*2;\r\n                this.data[x][y] = 0;\r\n                this.blocks[x][y]=null;\r\n                cc.log(\"number\"+this.data[x][y-1]);\r\n                this.blocks[x][y-1].getComponent('block').setNumber(this.data[x][y-1]);\r\n                this.doMove(block,position,()=>{\r\n                    block.destroy();\r\n                     callback && callback();\r\n                });\r\n                isTrue=true;\r\n            }else if(this.data[x][y] != this.data[x][y-1]){ //相邻数字不相同\r\n                callback && callback();\r\n                return;\r\n            }\r\n\r\n        };\r\n        for(let i = 0; i < 4; i++){\r\n            for (let j = 0; j < 4; j++) {\r\n                if(this.data[i][j]!=0){\r\n                    tomove.push({x:i,y:j})\r\n                }\r\n            }\r\n        }\r\n        let counter=0;\r\n        for (let i = 0; i < tomove.length; i++) {\r\n            move(tomove[i].x,tomove[i].y,()=>{\r\n                counter++;\r\n                if(counter == tomove.length){\r\n                    this.afterMove(isTrue);\r\n                }\r\n            })\r\n        }\r\n    }else if(dire == 'right'){\r\n        let tomove=[];\r\n        let isTrue=false;\r\n        let move = (x,y,callback)=>{\r\n            if(y==3 || this.data[x][y]==0){  //最左边|| 当前为0/null 不动\r\n                callback && callback();\r\n                return;\r\n            }else if(this.data[x][y+1]==0){  //左前一个为0 就移动\r\n                let block = this.blocks[x][y];\r\n                let position = this.positions[x][y+1];\r\n                this.blocks[x][y+1]=block;\r\n                this.data[x][y+1] = this.data[x][y];\r\n                this.data[x][y] = 0;\r\n                this.blocks[x][y]=null;\r\n                this.doMove(block,position,()=>{\r\n                     move(x,y+1,callback);\r\n                });\r\n                isTrue=true;\r\n            }else if(this.data[x][y] == this.data[x][y+1]){ //相邻数字相同 合并\r\n                let block = this.blocks[x][y];\r\n                let position = this.positions[x][y+1];\r\n\r\n                this.data[x][y+1] =this.data[x][y]*2;\r\n                this.data[x][y] = 0;\r\n                this.blocks[x][y]=null;\r\n                cc.log(\"number\"+this.data[x][y+1]);\r\n                this.blocks[x][y+1].getComponent('block').setNumber(this.data[x][y+1]);\r\n                this.doMove(block,position,()=>{\r\n                    block.destroy();\r\n                     callback && callback();\r\n                });\r\n                isTrue=true;\r\n            }else if(this.data[x][y] != this.data[x][y+1]){ //相邻数字不相同\r\n                callback && callback();\r\n                return;\r\n            }\r\n\r\n        };\r\n        for(let i = 0; i < 4; i++){\r\n            for (let j = 4-1; j >=0; j--) {\r\n                if(this.data[i][j]!=0){\r\n                    tomove.push({x:i,y:j})\r\n                }\r\n            }\r\n        }\r\n        let counter=0;\r\n        for (let i = 0; i < tomove.length; i++) {\r\n            move(tomove[i].x,tomove[i].y,()=>{\r\n                counter++;\r\n                if(counter == tomove.length){\r\n                    this.afterMove(isTrue);\r\n                }\r\n            })\r\n        }\r\n    }else if(dire == 'up'){\r\n        let tomove=[];\r\n        let isTrue=false;\r\n        let move = (x,y,callback)=>{\r\n            if(x==3 || this.data[x][y]==0){  //最左边|| 当前为0/null 不动\r\n                callback && callback();\r\n                return;\r\n            }else if(this.data[x+1][y]==0){  //左前一个为0 就移动\r\n                let block = this.blocks[x][y];\r\n                let position = this.positions[x+1][y];\r\n                this.blocks[x+1][y]=block;\r\n                this.data[x+1][y] = this.data[x][y];\r\n                this.data[x][y] = 0;\r\n                this.blocks[x][y]=null;\r\n                this.doMove(block,position,()=>{\r\n                     move(x+1,y,callback);\r\n                });\r\n                isTrue=true;\r\n            }else if(this.data[x][y] == this.data[x+1][y]){ //相邻数字相同 合并\r\n                let block = this.blocks[x][y];\r\n                let position = this.positions[x+1][y];\r\n                this.data[x+1][y] =this.data[x][y]*2;\r\n                this.data[x][y] = 0;\r\n                this.blocks[x][y]=null;\r\n                this.blocks[x+1][y].getComponent('block').setNumber(this.data[x+1][y]);\r\n                this.doMove(block,position,()=>{\r\n                    block.destroy();\r\n                     callback && callback();\r\n                });\r\n                isTrue=true;\r\n            }else if(this.data[x][y] != this.data[x+1][y]){ //相邻数字不相同\r\n                callback && callback();\r\n                return;\r\n            }\r\n\r\n        };\r\n        for(let i = 4-1; i >=0; i--){\r\n            for (let j = 0; j <4; j++) {\r\n                if(this.data[i][j]!=0){\r\n                    tomove.push({x:i,y:j})\r\n                }\r\n            }\r\n        }\r\n        let counter=0;\r\n        for (let i = 0; i < tomove.length; i++) {\r\n            move(tomove[i].x,tomove[i].y,()=>{\r\n                counter++;\r\n                if(counter == tomove.length){\r\n                    this.afterMove(isTrue);\r\n                }\r\n            })\r\n        }\r\n\r\n    }else{\r\n\r\n        let tomove=[];\r\n        let isTrue=false;\r\n        let move = (x,y,callback)=>{\r\n            if(x==0 || this.data[x][y]==0){  //最左边|| 当前为0/null 不动\r\n                callback && callback();\r\n                return;\r\n            }else if(this.data[x-1][y]==0){  //左前一个为0 就移动\r\n                let block = this.blocks[x][y];\r\n                let position = this.positions[x-1][y];\r\n                this.blocks[x-1][y]=block;\r\n                this.data[x-1][y] = this.data[x][y];\r\n                this.data[x][y] = 0;\r\n                this.blocks[x][y]=null;\r\n                this.doMove(block,position,()=>{\r\n                     move(x-1,y,callback);\r\n                });\r\n                isTrue=true;\r\n            }else if(this.data[x][y] == this.data[x-1][y]){ //相邻数字相同 合并\r\n                let block = this.blocks[x][y];\r\n                let position = this.positions[x-1][y];\r\n                this.data[x-1][y] =this.data[x][y]*2;\r\n                this.data[x][y] = 0;\r\n                this.blocks[x][y]=null;\r\n                this.blocks[x-1][y].getComponent('block').setNumber(this.data[x-1][y]);\r\n                this.doMove(block,position,()=>{\r\n                    block.destroy();\r\n                     callback && callback();\r\n                });\r\n                isTrue=true;\r\n            }else if(this.data[x][y] != this.data[x-1][y]){ //相邻数字不相同\r\n                callback && callback();\r\n                return;\r\n            }\r\n\r\n        };\r\n        for(let i = 0; i <4; i++){\r\n            for (let j = 0; j <4; j++) {\r\n                if(this.data[i][j]!=0){\r\n                    tomove.push({x:i,y:j})\r\n                }\r\n            }\r\n        }\r\n        let counter=0;\r\n        for (let i = 0; i < tomove.length; i++) {\r\n            move(tomove[i].x,tomove[i].y,()=>{\r\n                counter++;\r\n                if(counter == tomove.length){\r\n                    this.afterMove(isTrue);\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n},\r\n//滑动事件\r\naddEventHandler(){\r\n    this.background.on('touchstart',(event)=>{\r\n        this.startPoint=event.getLocation();\r\n    })\r\n\r\n    this.background.on('touchend',(event)=>{\r\n        this.endPoint=event.getLocation();\r\n        let vec=  this.endPoint.sub(this.startPoint);\r\n        if(vec.mag() > 50){ //判断滑动距离\r\n              if(Math.abs(vec.x) > Math.abs(vec.y)){\r\n                //水平方向\r\n                if(vec.x>0){\r\n                    this.moveMag('right');\r\n                }else{\r\n                    this.moveMag('left');\r\n                }\r\n              }else{\r\n                if(vec.y>0){\r\n                    this.moveMag('up');\r\n                }else{\r\n                    this.moveMag('down');\r\n                }\r\n              }\r\n        }\r\n    })\r\n},\r\n\r\n\r\nstart () {\r\n    this.getblocks();\r\n    this.init();\r\n    this.addEventHandler();\r\n},\r\n\r\n});\r\n"]}